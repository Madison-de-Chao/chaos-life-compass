# DocShow - æ–‡ä»¶å±•ç¤ºå¹³å°

<div align="center">

**å°‡ Word æ–‡ä»¶è½‰æ›ç‚ºç²¾ç¾çš„ç¶²é å±•ç¤ºï¼Œæ”¯æ´å¯†ç¢¼ä¿è­·åˆ†äº«èˆ‡æª”æ¡ˆè¿½è¹¤**

[English](#english) | [ç¹é«”ä¸­æ–‡](#ç¹é«”ä¸­æ–‡)

</div>

---

## ç¹é«”ä¸­æ–‡

### ğŸ“– å°ˆæ¡ˆç°¡ä»‹

DocShow æ˜¯ä¸€å€‹ç¾ä»£åŒ–çš„æ–‡ä»¶å±•ç¤ºå¹³å°ï¼Œå°ˆç‚ºå°‡ Word æ–‡ä»¶ï¼ˆ.docxï¼‰è½‰æ›æˆç¾è§€ã€äº’å‹•å¼çš„ç¶²é å±•ç¤ºè€Œè¨­è¨ˆã€‚ç„¡è«–æ˜¯å•†æ¥­ææ¡ˆã€æŠ€è¡“æ–‡ä»¶æˆ–æ•™å­¸ææ–™ï¼ŒDocShow éƒ½èƒ½å¹«åŠ©æ‚¨ä»¥å°ˆæ¥­ä¸”å„ªé›…çš„æ–¹å¼ç·šä¸Šåˆ†äº«æ–‡ä»¶ã€‚

### âœ¨ æ ¸å¿ƒåŠŸèƒ½

- **ğŸ“„ æ–‡ä»¶ä¸Šå‚³èˆ‡è§£æ**
  - æ”¯æ´ .docx æ ¼å¼çš„ Word æ–‡ä»¶ä¸Šå‚³
  - æ™ºèƒ½è§£ææ–‡ä»¶çµæ§‹ï¼Œä¿ç•™æ ¼å¼èˆ‡æ¨£å¼
  - è‡ªå‹•ç”Ÿæˆç›®éŒ„çµæ§‹ï¼ˆTOCï¼‰

- **ğŸ” å®‰å…¨åˆ†äº«æ©Ÿåˆ¶**
  - å¯†ç¢¼ä¿è­·åŠŸèƒ½ï¼Œç¢ºä¿æ–‡ä»¶å®‰å…¨
  - å¯è¨­å®šåˆ†äº«é€£çµçš„éæœŸæ™‚é–“
  - å…¬é–‹/ç§å¯†é€£çµæ§åˆ¶

- **ğŸ“Š æª”æ¡ˆè¿½è¹¤èˆ‡çµ±è¨ˆ**
  - æª¢è¦–æ¬¡æ•¸çµ±è¨ˆ
  - æª”æ¡ˆç®¡ç†å„€è¡¨æ¿
  - å„²å­˜ç©ºé–“ä½¿ç”¨é‡è¿½è¹¤

- **ğŸ‘¥ å®¢æˆ¶ç®¡ç†ç³»çµ±**
  - å®¢æˆ¶è³‡æ–™ç®¡ç†ï¼ˆå§“åã€æ€§åˆ¥ã€ç”Ÿæ—¥ã€è¯çµ¡æ–¹å¼ï¼‰
  - èˆ‡æ–‡ä»¶é—œè¯å®¢æˆ¶è³‡è¨Š
  - å®¢æˆ¶å‚™è¨»åŠŸèƒ½

- **ğŸ’¬ æ„è¦‹å›é¥‹ç³»çµ±**
  - æ”¶é›†ä½¿ç”¨è€…æ„è¦‹
  - å›é¥‹ç®¡ç†ä»‹é¢
  - æ„è¦‹è¿½è¹¤èˆ‡åˆ†é¡

- **ğŸ“ ç·šä¸Šæ–‡ä»¶ç·¨è¼¯**
  - æ”¯æ´ç·šä¸Šç·¨è¼¯æ–‡ä»¶å…§å®¹
  - å³æ™‚é è¦½
  - ç‰ˆæœ¬æ§åˆ¶

- **ğŸ¨ å„ªé›…çš„é–±è®€é«”é©—**
  - åˆ†é å¼æ–‡ä»¶é–±è®€å™¨
  - éŸ¿æ‡‰å¼è¨­è¨ˆï¼Œæ”¯æ´å„ç¨®è£ç½®
  - åˆ—å°å‹å–„ä»‹é¢

### ğŸ›  æŠ€è¡“æ¶æ§‹

#### å‰ç«¯æŠ€è¡“
- **æ¡†æ¶**: React 18.3
- **èªè¨€**: TypeScript
- **å»ºç½®å·¥å…·**: Vite 5.4
- **è·¯ç”±**: React Router DOM 6.30
- **ç‹€æ…‹ç®¡ç†**: TanStack React Query 5.83
- **UI å…ƒä»¶åº«**: shadcn/uiï¼ˆåŸºæ–¼ Radix UIï¼‰
- **æ¨£å¼**: Tailwind CSS 3.4
- **è¡¨å–®è™•ç†**: React Hook Form + Zod
- **åœ–è¡¨**: Recharts 2.15
- **æ–‡ä»¶è§£æ**: Mammoth.js

#### å¾Œç«¯æœå‹™
- **BaaS**: Supabase
  - èªè­‰ç³»çµ±
  - PostgreSQL è³‡æ–™åº«
  - æª”æ¡ˆå„²å­˜
  - å³æ™‚è¨‚é–±

#### é–‹ç™¼å·¥å…·
- **ç¨‹å¼ç¢¼æª¢æŸ¥**: ESLint 9
- **å‹åˆ¥æª¢æŸ¥**: TypeScript 5.8
- **åœ–ç¤º**: Lucide React

### ğŸ“¦ å®‰è£èˆ‡è¨­å®š

#### ç’°å¢ƒéœ€æ±‚
- Node.js 18+ æˆ– Bun
- npm æˆ– pnpm æˆ– bun

#### å®‰è£æ­¥é©Ÿ

1. **å…‹éš†å°ˆæ¡ˆ**
```bash
git clone <YOUR_GIT_URL>
cd chaos-life-compass
```

2. **å®‰è£ä¾è³´**
```bash
npm install
# æˆ–ä½¿ç”¨ bun
bun install
```

3. **è¨­å®šç’°å¢ƒè®Šæ•¸**

åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„å»ºç«‹ `.env` æª”æ¡ˆï¼š
```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_PUBLISHABLE_KEY=your_supabase_anon_key
VITE_SUPABASE_PROJECT_ID=your_project_id
```

4. **å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨**
```bash
npm run dev
```

æ‡‰ç”¨ç¨‹å¼å°‡åœ¨ `http://localhost:5173` å•Ÿå‹•

### ğŸš€ ä½¿ç”¨æŒ‡å—

#### åŸºæœ¬æµç¨‹

1. **è¨»å†Š/ç™»å…¥**
   - è¨ªå• `/auth` è·¯å¾‘é€²è¡Œèªè­‰
   - ä½¿ç”¨ Email è¨»å†Šæˆ–ç™»å…¥

2. **ä¸Šå‚³æ–‡ä»¶**
   - åœ¨é¦–é æ‹–æ”¾æˆ–é¸æ“‡ .docx æª”æ¡ˆ
   - ç³»çµ±è‡ªå‹•è§£æä¸¦å„²å­˜æ–‡ä»¶

3. **ç®¡ç†æ–‡ä»¶**
   - åœ¨ `/files` é é¢æŸ¥çœ‹æ‰€æœ‰ä¸Šå‚³çš„æ–‡ä»¶
   - ç·¨è¼¯ã€åˆ†äº«æˆ–åˆªé™¤æ–‡ä»¶
   - æŸ¥çœ‹çµ±è¨ˆè³‡è¨Š

4. **åˆ†äº«æ–‡ä»¶**
   - é»æ“Šã€Œåˆ†äº«ã€æŒ‰éˆ•
   - è¨­å®šå¯†ç¢¼ï¼ˆé¸å¡«ï¼‰
   - è¨­å®šéæœŸæ™‚é–“ï¼ˆé¸å¡«ï¼‰
   - è¤‡è£½åˆ†äº«é€£çµ

5. **æª¢è¦–åˆ†äº«æ–‡ä»¶**
   - è¨ªå• `/view/:shareLink`
   - è¼¸å…¥å¯†ç¢¼ï¼ˆå¦‚æœ‰è¨­å®šï¼‰
   - é–±è®€æ–‡ä»¶å…§å®¹

### ğŸ“ å°ˆæ¡ˆçµæ§‹

```
chaos-life-compass/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # React å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ ui/             # shadcn/ui åŸºç¤å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ Header.tsx      # é é¦–å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ FileUploadZone.tsx  # æª”æ¡ˆä¸Šå‚³å€
â”‚   â”‚   â”œâ”€â”€ PagedDocumentReader.tsx  # æ–‡ä»¶é–±è®€å™¨
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ modules/            # åŠŸèƒ½æ¨¡çµ„ï¼ˆå¯ç¨ç«‹é·ç§»ï¼‰
â”‚   â”‚   â””â”€â”€ member/         # æœƒå“¡æ¨¡çµ„
â”‚   â”‚       â”œâ”€â”€ types/      # å‹åˆ¥å®šç¾©
â”‚   â”‚       â”œâ”€â”€ context/    # èªè­‰ Context
â”‚   â”‚       â”œâ”€â”€ hooks/      # æ¬Šé™ Hooks
â”‚   â”‚       â”œâ”€â”€ utils/      # é©—è­‰é‚è¼¯
â”‚   â”‚       â”œâ”€â”€ components/ # UI å…ƒä»¶
â”‚   â”‚       â””â”€â”€ pages/      # æœƒå“¡é é¢
â”‚   â”œâ”€â”€ pages/              # é é¢å…ƒä»¶
â”‚   â”‚   â”œâ”€â”€ Index.tsx       # é¦–é ï¼ˆä¸Šå‚³ï¼‰
â”‚   â”‚   â”œâ”€â”€ FilesPage.tsx   # æª”æ¡ˆç®¡ç†
â”‚   â”‚   â”œâ”€â”€ ViewPage.tsx    # æ–‡ä»¶æª¢è¦–
â”‚   â”‚   â”œâ”€â”€ CustomersPage.tsx   # å®¢æˆ¶ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ FeedbacksPage.tsx   # æ„è¦‹å›é¥‹
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ hooks/              # è‡ªè¨‚ Hooks
â”‚   â”‚   â”œâ”€â”€ useAuth.tsx     # èªè­‰ Hook
â”‚   â”‚   â”œâ”€â”€ useDocuments.tsx    # æ–‡ä»¶ç®¡ç† Hook
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ lib/                # å·¥å…·å‡½å¼
â”‚   â”‚   â”œâ”€â”€ parseDocx.ts    # Word æ–‡ä»¶è§£æ
â”‚   â”‚   â””â”€â”€ utils.ts        # é€šç”¨å·¥å…·
â”‚   â”œâ”€â”€ integrations/       # ç¬¬ä¸‰æ–¹æ•´åˆ
â”‚   â”‚   â””â”€â”€ supabase/       # Supabase è¨­å®š
â”‚   â”œâ”€â”€ types/              # TypeScript å‹åˆ¥å®šç¾©
â”‚   â”œâ”€â”€ App.tsx             # ä¸»æ‡‰ç”¨å…ƒä»¶
â”‚   â””â”€â”€ main.tsx            # æ‡‰ç”¨å…¥å£é»
â”œâ”€â”€ supabase/               # Supabase è¨­å®šèˆ‡é·ç§»
â”‚   â”œâ”€â”€ functions/          # Edge Functions
â”‚   â”œâ”€â”€ migrations/         # è³‡æ–™åº«é·ç§»æª”æ¡ˆ
â”‚   â””â”€â”€ config.toml         # Supabase è¨­å®š
â”œâ”€â”€ docs/                   # æŠ€è¡“æ–‡æª”
â”‚   â”œâ”€â”€ migration/          # æœƒå“¡ä¸­å¿ƒé·ç§»è³‡æº
â”‚   â”œâ”€â”€ sdk/                # SDK æ–‡æª”èˆ‡ç¯„ä¾‹
â”‚   â”œâ”€â”€ MEMBER_CENTER_ARCHITECTURE.md
â”‚   â”œâ”€â”€ UNIFIED_MEMBER_SDK.md
â”‚   â””â”€â”€ ENTITLEMENTS_API.md
â”œâ”€â”€ public/                 # éœæ…‹è³‡æº
â”œâ”€â”€ index.html              # HTML ç¯„æœ¬
â”œâ”€â”€ package.json            # å°ˆæ¡ˆä¾è³´
â”œâ”€â”€ vite.config.ts          # Vite è¨­å®š
â”œâ”€â”€ tailwind.config.ts      # Tailwind CSS è¨­å®š
â””â”€â”€ tsconfig.json           # TypeScript è¨­å®š
```

### ğŸ”§ é–‹ç™¼æŒ‡ä»¤

```bash
# é–‹ç™¼æ¨¡å¼
npm run dev

# å»ºç½®å°ˆæ¡ˆ
npm run build

# å»ºç½®ï¼ˆé–‹ç™¼æ¨¡å¼ï¼‰
npm run build:dev

# ç¨‹å¼ç¢¼æª¢æŸ¥
npm run lint

# é è¦½å»ºç½®çµæœ
npm run preview
```

### ğŸ“ è³‡æ–™åº«çµæ§‹

ä¸»è¦è³‡æ–™è¡¨ï¼š
- `documents` - æ–‡ä»¶è³‡æ–™
- `customers` - å®¢æˆ¶è³‡æ–™
- `feedbacks` - æ„è¦‹å›é¥‹
- `profiles` - æœƒå“¡è³‡æ–™
- `user_roles` - ç”¨æˆ¶è§’è‰²
- `products` - ç”¢å“å®šç¾©
- `plans` - æ–¹æ¡ˆå®šç¾©
- `entitlements` - æ¬Šé™è¨˜éŒ„
- `oauth_clients` - OAuth å®¢æˆ¶ç«¯
- `api_keys` - API é‡‘é‘°

### ğŸ”’ å®‰å…¨æ€§è€ƒé‡

- ä½¿ç”¨ Supabase Row Level Security (RLS) ä¿è­·è³‡æ–™
- å¯†ç¢¼åŠ å¯†å„²å­˜ï¼ˆpgcryptoï¼‰
- åˆ†äº«é€£çµå”¯ä¸€æ€§é©—è­‰
- æª”æ¡ˆä¸Šå‚³å¤§å°é™åˆ¶
- XSS é˜²è­·ï¼ˆä½¿ç”¨ DOMPurifyï¼‰
- API Key é©—è­‰æ©Ÿåˆ¶
- OAuth 2.0 æˆæ¬Šæµç¨‹

### ğŸ‘¤ æœƒå“¡æ¨¡çµ„æ¶æ§‹

æœƒå“¡ç³»çµ±æ¡ç”¨æ¨¡çµ„åŒ–è¨­è¨ˆï¼Œä½æ–¼ `src/modules/member/`ï¼Œæ”¯æ´æœªä¾†ç¨ç«‹é·ç§»è‡³å°ˆå±¬æœƒå“¡ä¸­å¿ƒå°ˆæ¡ˆã€‚

#### æ¨¡çµ„çµæ§‹

```
src/modules/member/
â”œâ”€â”€ index.ts              # çµ±ä¸€åŒ¯å‡ºå…¥å£
â”œâ”€â”€ README.md             # æ¨¡çµ„ä½¿ç”¨èªªæ˜
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts          # Profileã€Entitlementã€OAuth ç­‰å‹åˆ¥
â”œâ”€â”€ context/
â”‚   â””â”€â”€ MemberContext.tsx # èªè­‰ç‹€æ…‹ç®¡ç† Provider
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useEntitlements.ts # æ¬Šé™æŸ¥è©¢èˆ‡ç®¡ç† Hooks
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ validation.ts      # Zod è¡¨å–®é©—è­‰é‚è¼¯
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ MemberProtectedRoute.tsx  # ä¿è­·è·¯ç”±
â”‚   â”œâ”€â”€ MemberCardSkeleton.tsx    # è¼‰å…¥éª¨æ¶
â”‚   â”œâ”€â”€ MemberLoginWidget.tsx     # ç™»å…¥å…ƒä»¶
â”‚   â””â”€â”€ OAuthAuthorizePage.tsx    # OAuth æˆæ¬Šé 
â””â”€â”€ pages/
    â”œâ”€â”€ UnifiedAuthPage.tsx       # çµ±ä¸€ç™»å…¥é 
    â”œâ”€â”€ UnifiedDashboard.tsx      # æœƒå“¡å„€è¡¨æ¿
    â””â”€â”€ UnifiedProfilePage.tsx    # å€‹äººè³‡æ–™é 
```

#### ä½¿ç”¨æ–¹å¼

```tsx
// å¾æ¨¡çµ„æ ¹ç›®éŒ„åŒ¯å…¥
import { 
  MemberProvider, 
  useMember, 
  useProducts,
  useMyEntitlements,
  MemberProtectedRoute,
  validateLoginForm,
} from '@/modules/member';

// å‹åˆ¥åŒ¯å…¥
import type { Profile, Entitlement, Product } from '@/modules/member';
```

#### æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | èªªæ˜ |
|------|------|
| èªè­‰ç®¡ç† | Email/Google ç™»å…¥ã€å¯†ç¢¼é‡è¨­ |
| æ¬Šé™ç³»çµ± | å¤šç”¢å“æ¬Šé™ã€æ™‚æ•ˆæ§åˆ¶ã€ç®¡ç†ä»‹é¢ |
| OAuth Provider | æä¾›å¤–éƒ¨å°ˆæ¡ˆæˆæ¬Šç™»å…¥ |
| API é©—è­‰ | API Key æ©Ÿåˆ¶ä¾›å¤–éƒ¨å°ˆæ¡ˆå‘¼å« |

### ğŸ”® æœƒå“¡ä¸­å¿ƒé·ç§»è¨ˆç•«

æœƒå“¡æ¨¡çµ„è¨­è¨ˆç‚ºå¯ç¨ç«‹é·ç§»è‡³å°ˆå±¬æœƒå“¡ä¸­å¿ƒå°ˆæ¡ˆï¼Œå¯¦ç¾å“ç‰Œç”Ÿæ…‹ç³»çš„çµ±ä¸€èº«ä»½èªè­‰ã€‚

#### æ¶æ§‹é¡˜æ™¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    æœƒå“¡ä¸­å¿ƒ (ç¨ç«‹å°ˆæ¡ˆ)                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   èªè­‰ç³»çµ±   â”‚  â”‚   æ¬Šé™ç³»çµ±   â”‚  â”‚  OAuth 2.0  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                         â”‚                                â”‚
â”‚                    REST API                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                    â”‚
          â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  ä¸»ç«™     â”‚        â”‚  éŠæˆ²ç«™   â”‚        â”‚  åœå¦ç«™   â”‚
    â”‚ DocShow  â”‚        â”‚ å‘½ç†éŠæˆ²  â”‚        â”‚ å…ƒå£¹å®‡å®™  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é·ç§»è³‡æº

| æ–‡ä»¶ | èªªæ˜ |
|------|------|
| `docs/MEMBER_CENTER_ARCHITECTURE.md` | å®Œæ•´æ¶æ§‹è¨­è¨ˆæ–‡æª” |
| `docs/migration/MEMBER_CENTER_MIGRATION.md` | é·ç§»æ­¥é©ŸæŒ‡å— |
| `docs/migration/schema.sql` | è³‡æ–™åº« Schema |
| `docs/migration/edge-functions/` | Edge Functions ç¨‹å¼ç¢¼ |
| `docs/migration/DATA_MIGRATION.md` | è³‡æ–™é·ç§»æŒ‡å— |
| `docs/UNIFIED_MEMBER_SDK.md` | SDK æ•´åˆæ–‡æª” |
| `docs/ENTITLEMENTS_API.md` | API åƒè€ƒæ–‡æª” |

#### é·ç§»éšæ®µ

1. **æº–å‚™éšæ®µ**ï¼ˆå·²å®Œæˆï¼‰
   - âœ… æœƒå“¡æ¨¡çµ„åŒ–é‡æ§‹
   - âœ… API ç«¯é»è¨­è¨ˆ
   - âœ… é·ç§»æ–‡æª”æº–å‚™

2. **å»ºç«‹éšæ®µ**
   - åœ¨ Lovable å»ºç«‹æ–°å°ˆæ¡ˆ
   - éƒ¨ç½²è³‡æ–™åº« Schema
   - éƒ¨ç½² Edge Functions

3. **é·ç§»éšæ®µ**
   - åŒ¯å‡ºç¾æœ‰æœƒå“¡è³‡æ–™
   - å»ºç«‹ç”¨æˆ¶å°ç…§è¡¨
   - åŒ¯å…¥è‡³æ–°æœƒå“¡ä¸­å¿ƒ

4. **æ•´åˆéšæ®µ**
   - ä¸»ç«™æ”¹ç”¨ API é©—è­‰
   - æ›´æ–°å¤–éƒ¨å°ˆæ¡ˆæ•´åˆ
   - é›™å¯«æ¨¡å¼éæ¸¡

5. **åˆ‡æ›éšæ®µ**
   - å®Œå…¨åˆ‡æ›è‡³æ–°æœƒå“¡ä¸­å¿ƒ
   - ç§»é™¤ä¸»ç«™æœƒå“¡ç›¸é—œè¡¨
   - ç›£æ§èˆ‡å„ªåŒ–

### ğŸ¤ è²¢ç»æŒ‡å—

æ­¡è¿æäº¤ Issue æˆ– Pull Requestï¼

1. Fork æœ¬å°ˆæ¡ˆ
2. å»ºç«‹æ‚¨çš„ç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ‚¨çš„ä¿®æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•Ÿ Pull Request

### ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆæ¡ç”¨ MIT æˆæ¬Šæ¢æ¬¾

---

## English

### ğŸ“– Project Overview

DocShow is a modern document display platform designed to convert Word documents (.docx) into beautiful, interactive web presentations. Whether it's business proposals, technical documentation, or educational materials, DocShow helps you share documents online in a professional and elegant manner.

### âœ¨ Key Features

- **ğŸ“„ Document Upload & Parsing**
  - Support for .docx Word document uploads
  - Intelligent document structure parsing with preserved formatting
  - Automatic Table of Contents (TOC) generation

- **ğŸ” Secure Sharing**
  - Password protection for document security
  - Configurable link expiration dates
  - Public/private link control

- **ğŸ“Š File Tracking & Analytics**
  - View count statistics
  - File management dashboard
  - Storage usage tracking

- **ğŸ‘¥ Customer Management**
  - Customer data management (name, gender, birth date, contact info)
  - Associate customers with documents
  - Customer notes functionality

- **ğŸ’¬ Feedback System**
  - Collect user feedback
  - Feedback management interface
  - Feedback tracking and categorization

- **ğŸ“ Online Document Editing**
  - Support for online content editing
  - Real-time preview
  - Version control

- **ğŸ¨ Elegant Reading Experience**
  - Paginated document reader
  - Responsive design for all devices
  - Print-friendly interface

### ğŸ›  Technology Stack

#### Frontend
- **Framework**: React 18.3
- **Language**: TypeScript
- **Build Tool**: Vite 5.4
- **Routing**: React Router DOM 6.30
- **State Management**: TanStack React Query 5.83
- **UI Components**: shadcn/ui (based on Radix UI)
- **Styling**: Tailwind CSS 3.4
- **Forms**: React Hook Form + Zod
- **Charts**: Recharts 2.15
- **Document Parsing**: Mammoth.js

#### Backend
- **BaaS**: Supabase
  - Authentication
  - PostgreSQL Database
  - File Storage
  - Real-time Subscriptions

#### Development Tools
- **Linting**: ESLint 9
- **Type Checking**: TypeScript 5.8
- **Icons**: Lucide React

### ğŸ“¦ Installation & Setup

#### Prerequisites
- Node.js 18+ or Bun
- npm or pnpm or bun

#### Installation Steps

1. **Clone the Repository**
```bash
git clone <YOUR_GIT_URL>
cd chaos-life-compass
```

2. **Install Dependencies**
```bash
npm install
# or using bun
bun install
```

3. **Configure Environment Variables**

Create a `.env` file in the project root:
```env
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_PUBLISHABLE_KEY=your_supabase_anon_key
VITE_SUPABASE_PROJECT_ID=your_project_id
```

4. **Start Development Server**
```bash
npm run dev
```

The application will start at `http://localhost:5173`

### ğŸš€ Usage Guide

#### Basic Workflow

1. **Register/Login**
   - Visit `/auth` route for authentication
   - Register or login with Email

2. **Upload Documents**
   - Drag and drop or select .docx files on the homepage
   - System automatically parses and stores documents

3. **Manage Documents**
   - View all uploaded documents on `/files` page
   - Edit, share, or delete documents
   - View statistics

4. **Share Documents**
   - Click "Share" button
   - Set password (optional)
   - Set expiration date (optional)
   - Copy share link

5. **View Shared Documents**
   - Visit `/view/:shareLink`
   - Enter password (if set)
   - Read document content

### ğŸ“ Project Structure

```
chaos-life-compass/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # React components
â”‚   â”‚   â”œâ”€â”€ ui/             # shadcn/ui base components
â”‚   â”‚   â”œâ”€â”€ Header.tsx      # Header component
â”‚   â”‚   â”œâ”€â”€ FileUploadZone.tsx  # File upload zone
â”‚   â”‚   â”œâ”€â”€ PagedDocumentReader.tsx  # Document reader
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ modules/            # Feature modules (independently migratable)
â”‚   â”‚   â””â”€â”€ member/         # Member module
â”‚   â”‚       â”œâ”€â”€ types/      # Type definitions
â”‚   â”‚       â”œâ”€â”€ context/    # Auth Context
â”‚   â”‚       â”œâ”€â”€ hooks/      # Entitlement Hooks
â”‚   â”‚       â”œâ”€â”€ utils/      # Validation logic
â”‚   â”‚       â”œâ”€â”€ components/ # UI components
â”‚   â”‚       â””â”€â”€ pages/      # Member pages
â”‚   â”œâ”€â”€ pages/              # Page components
â”‚   â”‚   â”œâ”€â”€ Index.tsx       # Homepage (upload)
â”‚   â”‚   â”œâ”€â”€ FilesPage.tsx   # File management
â”‚   â”‚   â”œâ”€â”€ ViewPage.tsx    # Document view
â”‚   â”‚   â”œâ”€â”€ CustomersPage.tsx   # Customer management
â”‚   â”‚   â”œâ”€â”€ FeedbacksPage.tsx   # Feedback management
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ hooks/              # Custom Hooks
â”‚   â”‚   â”œâ”€â”€ useAuth.tsx     # Authentication Hook
â”‚   â”‚   â”œâ”€â”€ useDocuments.tsx    # Document management Hook
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ lib/                # Utility functions
â”‚   â”‚   â”œâ”€â”€ parseDocx.ts    # Word document parser
â”‚   â”‚   â””â”€â”€ utils.ts        # Common utilities
â”‚   â”œâ”€â”€ integrations/       # Third-party integrations
â”‚   â”‚   â””â”€â”€ supabase/       # Supabase configuration
â”‚   â”œâ”€â”€ types/              # TypeScript type definitions
â”‚   â”œâ”€â”€ App.tsx             # Main app component
â”‚   â””â”€â”€ main.tsx            # Application entry point
â”œâ”€â”€ supabase/               # Supabase config & migrations
â”‚   â”œâ”€â”€ functions/          # Edge Functions
â”‚   â”œâ”€â”€ migrations/         # Database migration files
â”‚   â””â”€â”€ config.toml         # Supabase configuration
â”œâ”€â”€ docs/                   # Technical documentation
â”‚   â”œâ”€â”€ migration/          # Member center migration resources
â”‚   â”œâ”€â”€ sdk/                # SDK documentation & examples
â”‚   â”œâ”€â”€ MEMBER_CENTER_ARCHITECTURE.md
â”‚   â”œâ”€â”€ UNIFIED_MEMBER_SDK.md
â”‚   â””â”€â”€ ENTITLEMENTS_API.md
â”œâ”€â”€ public/                 # Static assets
â”œâ”€â”€ index.html              # HTML template
â”œâ”€â”€ package.json            # Project dependencies
â”œâ”€â”€ vite.config.ts          # Vite configuration
â”œâ”€â”€ tailwind.config.ts      # Tailwind CSS configuration
â””â”€â”€ tsconfig.json           # TypeScript configuration
```

### ğŸ”§ Development Commands

```bash
# Development mode
npm run dev

# Build project
npm run build

# Build (development mode)
npm run build:dev

# Lint code
npm run lint

# Preview build
npm run preview
```

### ğŸ“ Database Schema

Main Tables:
- `documents` - Document data
- `customers` - Customer data
- `feedbacks` - User feedback
- `profiles` - Member profiles
- `user_roles` - User roles
- `products` - Product definitions
- `plans` - Plan definitions
- `entitlements` - Entitlement records
- `oauth_clients` - OAuth clients
- `api_keys` - API keys

### ğŸ”’ Security Considerations

- Supabase Row Level Security (RLS) for data protection
- Encrypted password storage (pgcrypto)
- Unique share link validation
- File upload size limits
- XSS protection (using DOMPurify)
- API Key authentication mechanism
- OAuth 2.0 authorization flow

### ğŸ‘¤ Member Module Architecture

The member system is designed with a modular architecture located at `src/modules/member/`, supporting future migration to an independent member center project.

#### Module Structure

```
src/modules/member/
â”œâ”€â”€ index.ts              # Unified export entry
â”œâ”€â”€ README.md             # Module usage guide
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts          # Profile, Entitlement, OAuth types
â”œâ”€â”€ context/
â”‚   â””â”€â”€ MemberContext.tsx # Auth state management Provider
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useEntitlements.ts # Entitlement query & management Hooks
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ validation.ts      # Zod form validation logic
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ MemberProtectedRoute.tsx  # Protected routes
â”‚   â”œâ”€â”€ MemberCardSkeleton.tsx    # Loading skeleton
â”‚   â”œâ”€â”€ MemberLoginWidget.tsx     # Login widget
â”‚   â””â”€â”€ OAuthAuthorizePage.tsx    # OAuth authorization page
â””â”€â”€ pages/
    â”œâ”€â”€ UnifiedAuthPage.tsx       # Unified login page
    â”œâ”€â”€ UnifiedDashboard.tsx      # Member dashboard
    â””â”€â”€ UnifiedProfilePage.tsx    # Profile page
```

#### Usage

```tsx
// Import from module root
import { 
  MemberProvider, 
  useMember, 
  useProducts,
  useMyEntitlements,
  MemberProtectedRoute,
  validateLoginForm,
} from '@/modules/member';

// Type imports
import type { Profile, Entitlement, Product } from '@/modules/member';
```

#### Core Features

| Feature | Description |
|---------|-------------|
| Auth Management | Email/Google login, password reset |
| Entitlement System | Multi-product entitlements, time-based access, management UI |
| OAuth Provider | Provides authorization for external projects |
| API Authentication | API Key mechanism for external project calls |

### ğŸ”® Member Center Migration Plan

The member module is designed to be independently migrated to a dedicated Member Center project, enabling unified identity authentication across the brand ecosystem.

#### Architecture Vision

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Member Center (Independent Project)      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚    Auth     â”‚  â”‚ Entitlement â”‚  â”‚  OAuth 2.0  â”‚      â”‚
â”‚  â”‚   System    â”‚  â”‚   System    â”‚  â”‚             â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                         â”‚                                â”‚
â”‚                    REST API                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                    â”‚                    â”‚
          â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Main Siteâ”‚        â”‚  Games   â”‚        â”‚Divinationâ”‚
    â”‚ DocShow  â”‚        â”‚  Site    â”‚        â”‚  Site    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Migration Resources

| Document | Description |
|----------|-------------|
| `docs/MEMBER_CENTER_ARCHITECTURE.md` | Complete architecture design |
| `docs/migration/MEMBER_CENTER_MIGRATION.md` | Migration steps guide |
| `docs/migration/schema.sql` | Database schema |
| `docs/migration/edge-functions/` | Edge Functions code |
| `docs/migration/DATA_MIGRATION.md` | Data migration guide |
| `docs/UNIFIED_MEMBER_SDK.md` | SDK integration documentation |
| `docs/ENTITLEMENTS_API.md` | API reference documentation |

#### Migration Phases

1. **Preparation Phase** (Completed)
   - âœ… Member module refactoring
   - âœ… API endpoint design
   - âœ… Migration documentation

2. **Setup Phase**
   - Create new project in Lovable
   - Deploy database schema
   - Deploy Edge Functions

3. **Migration Phase**
   - Export existing member data
   - Create user mapping table
   - Import to new member center

4. **Integration Phase**
   - Switch main site to API authentication
   - Update external project integrations
   - Dual-write mode transition

5. **Cutover Phase**
   - Fully switch to new member center
   - Remove member-related tables from main site
   - Monitoring & optimization

### ğŸ¤ Contributing

Issues and Pull Requests are welcome!

1. Fork this repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

### ğŸ“„ License

This project is licensed under the MIT License
